"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[549],{5549:function(e,t,a){a.d(t,{Z:function(){return u},b:function(){return l}});var o=a(7437),n=a(2265),r=a(3644),i=a(2711);let s=(e,t)=>{switch(t.type){case r.Hp.NEW_GAME_INIT:{let a=t.payload.arg,o={opponent:"white"===a.player.colour?"b":"w",position:[(0,i.yu)()],turn:a.turn?a.player.colour.charAt(0).toLowerCase():a.opponent.colour.charAt(0).toLowerCase(),movementTurn:"white"===a.player.colour,status:r.XN.ongoing,turnTime:{currentPlayerId:a.turn?a.player.id:a.opponent.id,counter:"30.00",life:3}};return{...e,opponent:o.opponent,position:o.position,turn:o.turn,status:o.status,pl:t.payload.arg.player,op:t.payload.arg.opponent,turnTime:o.turnTime,movementTurn:o.movementTurn}}case r.Hp.GAME_TIME:return{...e,gameTime:t.payload.counter};case r.Hp.TURN_TIME:return{...e,turnTime:t.payload};case r.Hp.UPDATE_TURN:{let a=t.payload;return{...e,turn:a.turn?a.player.colour.charAt(0).toLowerCase():a.opponent.colour.charAt(0).toLowerCase()}}case r.Hp.GAME_END:{let a=t.payload;return e.socket.onUpdateWin({player:{id:a.player.id,score:a.player.score,colour:a.player.colour},opponent:{id:a.opponent.id,score:a.opponent.score,colour:a.opponent.colour},winner:a.winner}),{...e,status:r.XN.gameEnd}}case r.Hp.BOARD_UPDATE:{let a=t.payload.arg.board;if(console.log(a,"updated board===================================>"),console.log("update board run ===============>"),null==a?void 0:a.status){if(a.status===r.XN.newGameInit)return{...e,movementTurn:"w"!==e.opponent,opponent:"w"===e.opponent?"b":"w",advantage:0,position:[(0,i.yu)()],status:r.XN.ongoing,turn:"w",moveList:[],kill_pices:[],castlingdir:{w:"both",b:"both"}};return e.movementTurn,{...e,status:a.status,advantage:a.advantage}}{let t=[...e.position,a.position];return e.movementTurn,{...e,position:t,advantage:a.advantage,moveList:[...a.moveList],kill_pices:[...a.kill_pices],castlingdir:a.castlingDirection}}}case r.Hp.NEW_MOVE:{let a=[];if(e.movementTurn,e.moveList.length){let o=e.moveList[e.moveList.length-1];2!==o.length?(a=[...e.moveList])[e.moveList.length-1]=[o[0],t.payload.newMove]:a=[...e.moveList,[t.payload.newMove]]}else a=[[t.payload.newMove]];let o=[...e.position,t.payload.newPosition];return e.socket.onUpdateMove({board:{position:t.payload.newPosition,moveList:a,advantage:e.advantage,kill_pices:e.kill_pices,castlingDirection:e.castlingdir},game_state:{status:e.status,advantage:0===e.advantage?"Neither side":e.advantage>0?"Black":"White"}}),{...e,position:o,moveList:a}}case r.Hp.CANDIDATE_MOVE:return{...e,candidateMove:t.payload.candicateMove};case r.Hp.CLEAR_CANDIDATE_MOVES:return{...e,candidateMove:t.payload};case r.Hp.CLEAR_PIECES_SQOURE_INFO:return{...e,pieces_square_info:t.payload};case r.Hp.PIECES_SQOURE_INFO:return{...e,pieces_square_info:t.payload.pieces_square_info};case r.Hp.OPEN_PROMOTION_BOX:return{...e,status:r.XN.promoting,promotion_square_info:t.payload};case r.Hp.CLOSE_PROMOTION_BOX:return{...e,status:r.XN.ongoing};case r.Hp.CLEAR_PROMOTION_SQOUR_INFO:return{...e,promotion_square_info:null};case r.Hp.CHECK_CASTEL:{let{turn:a,castlingdir:o}=e;return o[a]=t.payload,{...e,status:r.XN.ongoing}}case r.Hp.DECTACT_STALEMET:return e.socket.onUpdateMove({board:{status:r.XN.stalemet,advantage:e.advantage},game_state:{status:e.status,advantage:0===e.advantage?"Neither side":e.advantage>0?"Black":"White"}}),e.socket.onUpdateWin({player:{id:e.pl.id,score:.5,colour:e.pl.colour},opponent:{id:e.op.id,score:.5,colour:e.op.colour},winner:r.XN.stalemet}),{...e,status:r.XN.stalemet};case r.Hp.DECTACT_INSUFFICIANT_MATARIAL:return e.socket.onUpdateMove({board:{status:r.XN.insufficiant,advantage:e.advantage},game_state:{status:e.status,advantage:0===e.advantage?"Neither side":e.advantage>0?"Black":"White"}}),e.socket.onUpdateWin({player:{id:e.pl.id,score:.5,colour:e.pl.colour},opponent:{id:e.op.id,score:.5,colour:e.op.colour},winner:r.XN.insufficiant}),{...e,status:r.XN.insufficiant};case r.Hp.WIN:return e.socket.onUpdateMove({board:{status:"w"===t.payload?r.XN.white:r.XN.black,advantage:e.advantage},game_state:{status:e.status,advantage:0===e.advantage?"Neither side":e.advantage>0?"Black":"White"}}),e.socket.onUpdateWin({player:{id:e.pl.id,score:e.pl.colour[0]===t.payload?1:0,colour:e.pl.colour},opponent:{id:e.op.id,score:e.pl.colour[0]===t.payload?0:1,colour:e.op.colour},winner:e.pl.colour[0]===t.payload?e.pl.colour:e.op.colour}),{...e,status:"w"===t.payload?r.XN.white:r.XN.black};case r.Hp.SAVE_KILL_PICES:{var a;let o=t.payload.prevPosition,n=t.payload.x,r=t.payload.y,i=(null==o?void 0:null===(a=o[n])||void 0===a?void 0:a[r])?o[n][r]:null;return{...e,kill_pices:[...e.kill_pices,i]}}case r.Hp.UPDATE_ADVANTAGE:return{...e,advantage:t.payload};case r.Hp.NEW_GAME:return e.socket.onUpdateMove({board:{advantage:0,position:[(0,i.yu)()],status:r.XN.newGameInit,turn:"w",moveList:[],kill_pices:[],castlingdir:{w:"both",b:"both"}},game_state:{status:e.status,advantage:0===e.advantage?"Neither side":e.advantage>0?"Black":"White"}}),{...e,opponent:"w"===e.opponent?"b":"w",advantage:0,position:[(0,i.yu)()],status:r.XN.ongoing,turn:"w",moveList:[],kill_pices:[],castlingdir:{w:"both",b:"both"}};case r.Hp.NEW_SOCKET_CONNECTION:return{...e,socket:t.payload.socket}}},p=(0,n.createContext)({});function l(){return(0,n.useContext)(p)}var u=function(e){let[t,a]=(0,n.useReducer)(s,r.XG);return(0,o.jsx)(p.Provider,{value:{appState:t,dispatch:a},children:e.children})}},3644:function(e,t,a){a.d(t,{Hp:function(){return r},XG:function(){return n},XN:function(){return o}});let o={gameEnd:"game end",pending:"pending",stalemet:"game draws due to stalemet",insufficiant:"game draw due to insufficient mating material.",ongoing:"ongoing",draw:"draw",promoting:"promoting",white:"white wins",black:"black wins",w_check:"Oops white in check",b_check:"Oops Black in check",newGameInit:"new Game init by user "},n={socket:null,opponent:"",advantage:0,position:[],turn:"",candidateMove:[],moveList:[],kill_pices:[],pieces_square_info:"",status:o.pending,promotion_square_info:null,castlingdir:{w:"both",b:"both"},pl:{},op:{},turnTime:{},gameTime:0,movementTurn:!1};Object.freeze(n);let r={NEW_GAME_INIT:"NEW_GAME_INIT",GAME_TIME:"GAME_TIME",TURN_TIME:"TURN_TIME",UPDATE_TURN:"UPDATE_TURN",BOARD_UPDATE:"BOARD_UPDATE",NEW_MOVE:"NEW_MOVE",PIECES_SQOURE_INFO:"PIECES_SQOURE_INFO",CLEAR_PIECES_SQOURE_INFO:"CLEAR_PIECES_SQOURE_INFO",CANDIDATE_MOVE:"CANDIDATE_MOVE",CLEAR_CANDIDATE_MOVES:"CLEAR_CANDIDATE_MOVES",OPEN_PROMOTION_BOX:"OPEN_PROMOTION_BOX",CLOSE_PROMOTION_BOX:"CLOSE_PROMOTION_BOX",CLEAR_PROMOTION_SQOUR_INFO:"CLEAR_PROMOTION_SQOUR_INFO",CHECK_CASTEL:"CHECK_CASTEL",DECTACT_STALEMET:"DECTACT_STALEMET",DECTACT_INSUFFICIANT_MATARIAL:"DECTACT_INSUFFICIANT_MATARIAL",WIN:"WIN",SAVE_KILL_PICES:"SAVE_KILL_PICES",NEW_GAME:"NEW_GAME",GAME_END:"GAME_END",UPDATE_ADVANTAGE:"UPDATE_ADVANTAGE",NEW_SOCKET_CONNECTION:"NEW_SOCKET_CONNECTION"}},2711:function(e,t,a){a.d(t,{FC:function(){return s},MS:function(){return d},PI:function(){return _},Xz:function(){return l},gJ:function(){return i},nq:function(){return p},rP:function(){return n},yu:function(){return o}});let o=()=>{let e=Array(8).fill("").map(e=>Array(8).fill(""));for(let t=0;t<8;t++)e[6][t]="bp",e[1][t]="wp";return e[0][0]="wr",e[0][1]="wn",e[0][2]="wb",e[0][3]="wq",e[0][4]="wk",e[0][5]="wb",e[0][6]="wn",e[0][7]="wr",e[7][0]="br",e[7][1]="bn",e[7][2]="bb",e[7][3]="bq",e[7][4]="bk",e[7][5]="bb",e[7][6]="bn",e[7][7]="br",e},n=e=>{let t=Array(8).fill("").map(e=>Array(8).fill(""));for(let a=0;a<8;a++)for(let o=0;o<8;o++)t[a][o]=e[a][o];return t},r=e=>String.fromCharCode(96+e),i=(e,t)=>(e.x+e.y)%2===t.x+t.y,s=(e,t)=>{let a=[];return e.forEach((e,o)=>{e.forEach((e,n)=>{e===t&&a.push({x:o,y:n})})}),a},p=e=>{let{piece:t,rank:a,file:o,x:n,y:i,position:s,promotesTo:p}=e,l="";return(a=Number(a),o=Number(o),"k"===t[1]&&2===Math.abs(o-i))?o<i?"O-O":"O-O-O":("p"!==t[1]?(l+=t[1].toUpperCase(),s[n][i]&&(l+="x")):a!==n&&o!==i&&(l+=r(o+1)+"x"),l+=r(i+1)+(n+1),p&&(l+="="+p.toUpperCase()),l)};var l={p:100,n:280,b:320,r:479,q:929,k:6e4,k_e:6e4},u={p:[[100,100,100,100,105,100,100,100],[78,83,86,73,102,82,85,90],[7,29,21,44,40,31,44,7],[-17,16,-2,15,14,0,15,-13],[-26,3,10,9,6,1,0,-23],[-22,9,5,-11,-10,-2,3,-19],[-31,8,-7,-37,-36,-14,3,-31],[0,0,0,0,0,0,0,0]],n:[[-66,-53,-75,-75,-10,-55,-58,-70],[-3,-6,100,-36,4,62,-4,-14],[10,67,1,74,73,27,62,-2],[24,24,45,37,33,41,25,17],[-1,5,31,21,22,35,2,0],[-18,10,13,22,18,15,11,-14],[-23,-15,2,0,2,0,-23,-20],[-74,-23,-26,-24,-19,-35,-22,-69]],b:[[-59,-78,-82,-76,-23,-107,-37,-50],[-11,20,35,-42,-39,31,2,-22],[-9,39,-32,41,52,-10,28,-14],[25,17,20,34,26,25,15,10],[13,10,17,23,17,16,0,7],[14,25,24,15,8,25,20,15],[19,20,11,6,7,6,20,16],[-7,2,-15,-12,-14,-15,-10,-10]],r:[[35,29,33,4,37,33,56,50],[55,29,56,67,55,62,34,60],[19,35,28,33,45,27,25,15],[0,5,16,13,18,-4,-9,-6],[-28,-35,-16,-21,-13,-29,-46,-30],[-42,-28,-42,-25,-25,-35,-26,-46],[-53,-38,-31,-26,-29,-43,-44,-53],[-30,-24,-18,5,-2,-18,-31,-32]],q:[[6,1,-8,-104,69,24,88,26],[14,32,60,-10,20,76,57,24],[-2,43,32,60,72,63,43,2],[1,-16,22,17,25,20,-13,-6],[-14,-15,-2,-5,-1,-10,-20,-22],[-30,-6,-13,-11,-16,-11,-16,-27],[-36,-18,0,-19,-15,-15,-21,-38],[-39,-30,-31,-13,-31,-36,-34,-42]],k:[[4,54,47,-99,-99,60,83,-62],[-32,10,55,56,56,55,10,3],[-62,12,-57,44,-67,28,37,-31],[-55,50,11,-4,-19,13,0,-49],[-55,-43,-52,-28,-51,-47,-8,-50],[-47,-42,-43,-79,-64,-32,-29,-32],[-4,3,-14,-50,-57,-18,13,4],[17,30,-3,-14,6,-1,40,18]],k_e:[[-50,-40,-30,-20,-20,-30,-40,-50],[-30,-20,-10,0,0,-10,-20,-30],[-30,-10,20,30,30,20,-10,-30],[-30,-10,30,40,40,30,-10,-30],[-30,-10,30,40,40,30,-10,-30],[-30,-10,20,30,30,20,-10,-30],[-30,-30,0,0,0,0,-30,-30],[-50,-30,-30,-30,-30,-30,-30,-50]]},c={p:u.p.slice().reverse(),n:u.n.slice().reverse(),b:u.b.slice().reverse(),r:u.r.slice().reverse(),q:u.q.slice().reverse(),k:u.k.slice().reverse(),k_e:u.k_e.slice().reverse()},d={w:c,b:u},_={w:u,b:c}}}]);