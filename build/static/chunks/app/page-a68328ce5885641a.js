(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{7413:function(e,t,o){Promise.resolve().then(o.bind(o,8157))},8157:function(e,t,o){"use strict";o.r(t),o.d(t,{default:function(){return u}});var n=o(7437),r=o(4033),a=o(2265),s=o(3388),i=o(8667);class l{create(){}_initSocketListeners(){this.socket.on("connect",()=>{console.log("Successfully connected!======>",this.socket.id),localStorage.setItem("socketId",this.socket.id)})}getGameInitFromServer(e){this.socket.on("game-start",t=>{e((0,i.WE)({arg:t})),console.log(t,"game start from server========>")})}getUpdateDetailsFromServer(e){this.socket.on("update-details",t=>{e((0,i.wN)({arg:t})),console.log("Game Update Details From Server=============>",t)})}onGmaeTime(e){this.socket.on("gameTimer",t=>{e((0,i.Mt)(t))})}onTurnTimer(e){this.socket.on("turnTimer",t=>{e((0,i.Qi)(t))})}onTurnChange(e){this.socket.on("game-updateTurn",t=>{e((0,i.p$)(t)),console.log("Game-upadteTurn From server=============>",t)})}onUpdateMove(e){console.log("update move emit ===============>",e),this.socket.emit("update-move",e)}onUpdateWin(e){console.log("result emit ============>",e),this.socket.emit("update-score",e)}onRendomMatch(){console.log("queue-join Emit ============>"),this.socket.emit("queue-join")}onQueueLeave(){console.log("queue leave emit =============>"),this.socket.emit("queue-leave")}emitDisConnect(){this.socket.disconnect()}onGameEnd(e){this.socket.on("game-end",t=>{console.log("game end  =============>"),e((0,i.Ee)(t))})}constructor(e){this.gameSceneRefence=e,this.urlParams=new URLSearchParams(window.location.search),this.token=this.urlParams.get("auth_token"),this.baseUrl="http://16.163.81.210:5003/chessio",this.socket=(0,s.io)(this.baseUrl,{query:{auth_token:this.token}}),this.soundName=null,this._initSocketListeners()}}var c=o(5549);function u(){let e=(0,r.useRouter)(),{appState:t,dispatch:o}=(0,c.b)(),s=async()=>{let t=window.location.search;if(t){let n=await new URLSearchParams(t);if(n.get("auth_token")){let t=n.get("auth_token"),r=new l;o((0,i.J$)({socket:r})),localStorage.setItem("auth_token",t),localStorage.setItem("game_mode","online"),e.push("/loader",{scroll:!1})}else n.get("mode")&&"offline"===n.get("mode")&&(localStorage.setItem("game_mode","offline"),e.push("/loader",{scroll:!1}))}else console.log("%cAuthentication Faild","background-color: white; color: red; font-size: larger; font-weight: 700")};return(0,a.useEffect)(()=>{localStorage.removeItem("game_status"),localStorage.removeItem("socketId"),localStorage.removeItem("auth_token"),localStorage.removeItem("game_mode");let e=setTimeout(()=>{s()},1e3);return()=>{window.clearTimeout(e)}},[]),(0,n.jsx)("main",{children:(0,n.jsx)("div",{className:"view_container",children:(0,n.jsxs)("div",{className:"splash_wrapper",children:[(0,n.jsx)("div",{className:"splash_background"}),(0,n.jsx)("div",{className:"splash_logo"})]})})})}},8667:function(e,t,o){"use strict";o.d(t,{$j:function(){return s},Ee:function(){return I},HE:function(){return m},J$:function(){return _},K1:function(){return g},Kt:function(){return h},Mt:function(){return y},Qc:function(){return r},Qi:function(){return k},Qu:function(){return d},UG:function(){return i},WE:function(){return E},YH:function(){return c},ib:function(){return p},p$:function(){return T},tq:function(){return u},ut:function(){return a},wN:function(){return f},wc:function(){return l}});var n=o(3644);let r=e=>{let{newPosition:t,newMove:o}=e;return{type:n.Hp.NEW_MOVE,payload:{newPosition:t,newMove:o}}},a=e=>{let{pieces_square_info:t}=e;return{type:n.Hp.PIECES_SQOURE_INFO,payload:{pieces_square_info:t}}},s=e=>{let{candicateMove:t}=e;return{type:n.Hp.CANDIDATE_MOVE,payload:{candicateMove:t}}},i=()=>({type:n.Hp.CLEAR_CANDIDATE_MOVES,payload:[]}),l=()=>({type:n.Hp.CLEAR_PIECES_SQOURE_INFO,payload:""}),c=e=>{let{rank:t,file:o,x:r,y:a}=e;return{type:n.Hp.OPEN_PROMOTION_BOX,payload:{rank:t,file:o,x:r,y:a}}},u=e=>({type:n.Hp.CHECK_CASTEL,payload:e}),p=()=>({type:n.Hp.DECTACT_STALEMET}),m=()=>({type:n.Hp.DECTACT_INSUFFICIANT_MATARIAL}),d=e=>({type:n.Hp.WIN,payload:e}),h=e=>{let{prevPosition:t,x:o,y:r}=e;return{type:n.Hp.SAVE_KILL_PICES,payload:{prevPosition:t,x:o,y:r}}},_=e=>{let{socket:t}=e;return{type:n.Hp.NEW_SOCKET_CONNECTION,payload:{socket:t}}},E=e=>{let{arg:t}=e;return{type:n.Hp.NEW_GAME_INIT,payload:{arg:t}}},f=e=>{let{arg:t}=e;return{type:n.Hp.BOARD_UPDATE,payload:{arg:t}}},g=e=>({type:n.Hp.UPDATE_ADVANTAGE,payload:e}),y=e=>({type:n.Hp.GAME_TIME,payload:e}),k=e=>({type:n.Hp.TURN_TIME,payload:e}),T=e=>({type:n.Hp.UPDATE_TURN,payload:e}),I=e=>({type:n.Hp.GAME_END,payload:e})}},function(e){e.O(0,[553,549,971,472,744],function(){return e(e.s=7413)}),_N_E=e.O()}]);